import { ReactNode } from 'react';

// Define translation namespace types
export type TranslationNamespace = 'common' | 'home' | 'profile' | 'chat' | 'settings';

// Translation dictionary structure
export interface Translations {
  [key: string]: string | Translations;
}

// Language types
export type Language = 'en' | 'ro' | 'ru';

// i18n context type
export interface I18nContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string, namespace?: TranslationNamespace) => string;
}

// Translation dictionary
export const translations: Record<Language, Record<TranslationNamespace, Translations>> = {
  en: {
    common: {
      home: 'Home',
      videos: 'Videos',
      chat: 'Chat',
      messages: 'Messages',
      profile: 'Profile',
      settings: 'Settings',
      search: 'Search',
      searchUsers: 'Search Users',
      cancel: 'Cancel',
      save: 'Save',
      edit: 'Edit',
      delete: 'Delete',
      back: 'Back',
      logout: 'Logout',
      login: 'Login',
      signup: 'Sign Up',
      close: 'Close',
      loading: 'Loading...',
      error: 'Error',
      success: 'Success',
      noResults: 'No results found',
      language: 'Language',
      theme: 'Theme',
      darkMode: 'Dark Mode',
      lightMode: 'Light Mode',
      notifications: 'Notifications',
      message: 'Message',
      like: 'Like',
      comment: 'Comment',
      share: 'Share',
      liked: 'Liked',
    },
    home: {
      feed: 'Feed',
      noPostsYet: 'No posts yet',
      createYourFirst: 'Create your first post',
    },
    profile: {
      myProfile: 'My Profile',
      publicProfile: 'Profile',
      editProfile: 'Edit Profile',
      followers: 'Followers',
      following: 'Following',
      posts: 'Posts',
      age: 'Age',
      gender: 'Gender',
      interests: 'Interests',
      male: 'Male',
      female: 'Female',
      selectAge: 'Select Age',
      selectGender: 'Select Gender',
      uploadPhoto: 'Upload Photo',
      changePhoto: 'Change Photo',
      selectInterests: 'Select Your Interests',
      music: 'Music',
      painting: 'Painting',
      gaming: 'Gaming',
      sports: 'Sports',
      art: 'Art',
      technology: 'Technology',
      travel: 'Travel',
      food: 'Food',
      fashion: 'Fashion',
      photography: 'Photography',
    },
    chat: {
      messages: 'Messages',
      typeMessage: 'Type a message...',
      typingNow: 'typing...',
      noMessages: 'No messages yet',
      startConversation: 'Start a conversation',
      newMessage: 'New Message',
    },
    settings: {
      accountSettings: 'Account Settings',
      profileSettings: 'Profile Settings',
      privacySettings: 'Privacy Settings',
      notificationSettings: 'Notification Settings',
      languageSettings: 'Language',
      themeSettings: 'Appearance',
      saveChanges: 'Save Changes',
      changesSaved: 'Changes saved successfully',
      confirmDelete: 'Are you sure?',
    },
  },
  ro: {
    common: {
      home: 'Acasă',
      videos: 'Videoclipuri',
      chat: 'Chat',
      messages: 'Mesaje',
      profile: 'Profil',
      settings: 'Setări',
      search: 'Căutare',
      searchUsers: 'Cauta utilizatori',
      cancel: 'Anulare',
      save: 'Salvare',
      edit: 'Editare',
      delete: 'Ștergere',
      back: 'Înapoi',
      logout: 'Deconectare',
      login: 'Conectare',
      signup: 'Înregistrare',
      close: 'Inchidere',
      loading: 'Se încarcă...',
      error: 'Eroare',
      success: 'Succes',
      noResults: 'Nu s-au găsit rezultate',
      language: 'Limbă',
      theme: 'Tema',
      darkMode: 'Mod Noapte',
      lightMode: 'Mod Lumină',
      notifications: 'Notificări',
      message: 'Mesaj',
      like: 'Like',
      comment: 'Comentariu',
      share: 'Partajare',
      liked: 'M-a plăcut',
    },
    home: {
      feed: 'Flux',
      noPostsYet: 'Niciun post încă',
      createYourFirst: 'Creează-ți primul post',
    },
    profile: {
      myProfile: 'Profilul Meu',
      publicProfile: 'Profil',
      editProfile: 'Editare Profil',
      followers: 'Urmăritori',
      following: 'Urmărind',
      posts: 'Postări',
      age: 'Vârstă',
      gender: 'Gen',
      interests: 'Interese',
      male: 'Bărbat',
      female: 'Femeie',
      selectAge: 'Alege Vârstă',
      selectGender: 'Alege Gen',
      uploadPhoto: 'Încarcă Foto',
      changePhoto: 'Schimbă Foto',
      selectInterests: 'Alege-ți Interesele',
      music: 'Muzică',
      painting: 'Pictură',
      gaming: 'Gaming',
      sports: 'Sport',
      art: 'Artă',
      technology: 'Tehnologie',
      travel: 'Călătorii',
      food: 'Mâncare',
      fashion: 'Modă',
      photography: 'Fotografie',
    },
    chat: {
      messages: 'Mesaje',
      typeMessage: 'Scrie un mesaj...',
      typingNow: 'scrie...',
      noMessages: 'Niciun mesaj încă',
      startConversation: 'Începe o conversație',
      newMessage: 'Mesaj Nou',
    },
    settings: {
      accountSettings: 'Setări Cont',
      profileSettings: 'Setări Profil',
      privacySettings: 'Setări Confidențialitate',
      notificationSettings: 'Setări Notificări',
      languageSettings: 'Limbă',
      themeSettings: 'Aspect',
      saveChanges: 'Salvează Modificări',
      changesSaved: 'Modificări salvate cu succes',
      confirmDelete: 'Ești sigur?',
    },
  },
  ru: {
    common: {
      home: 'Главная',
      videos: 'Видео',
      chat: 'Чат',
      messages: 'Сообщения',
      profile: 'Профиль',
      settings: 'Настройки',
      search: 'Поиск',
      searchUsers: 'Поиск пользователей',
      cancel: 'Отмена',
      save: 'Сохранить',
      edit: 'Редактировать',
      delete: 'Удалить',
      back: 'Назад',
      logout: 'Выход',
      login: 'Вход',
      signup: 'Регистрация',
      close: 'Закрыть',
      loading: 'Загрузка...',
      error: 'Ошибка',
      success: 'Успешно',
      noResults: 'Результаты не найдены',
      language: 'Язык',
      theme: 'Тема',
      darkMode: 'Тёмный режим',
      lightMode: 'Светлый режим',
      notifications: 'Уведомления',
      message: 'Сообщение',
      like: 'Лайк',
      comment: 'Комментарий',
      share: 'Поделиться',
      liked: 'Нравится',
    },
    home: {
      feed: 'Лента',
      noPostsYet: 'Постов ещё нет',
      createYourFirst: 'Создайте свой первый пост',
    },
    profile: {
      myProfile: 'Мой профиль',
      publicProfile: 'Профиль',
      editProfile: 'Редактировать профиль',
      followers: 'Подписчики',
      following: 'Подписки',
      posts: 'Посты',
      age: 'Возраст',
      gender: 'Пол',
      interests: 'Интересы',
      male: 'Мужской',
      female: 'Женский',
      selectAge: 'Выберите возраст',
      selectGender: 'Выберите пол',
      uploadPhoto: 'Загрузить фото',
      changePhoto: 'Изменить фото',
      selectInterests: 'Выберите ваши интересы',
      music: 'Музыка',
      painting: 'Живопись',
      gaming: 'Игры',
      sports: 'Спорт',
      art: 'Искусство',
      technology: 'Технологии',
      travel: 'Путешествия',
      food: 'Еда',
      fashion: 'Мода',
      photography: 'Фотография',
    },
    chat: {
      messages: 'Сообщения',
      typeMessage: 'Напишите сообщение...',
      typingNow: 'печатает...',
      noMessages: 'Сообщений ещё нет',
      startConversation: 'Начните беседу',
      newMessage: 'Новое сообщение',
    },
    settings: {
      accountSettings: 'Параметры учётной записи',
      profileSettings: 'Параметры профиля',
      privacySettings: 'Параметры конфиденциальности',
      notificationSettings: 'Параметры уведомлений',
      languageSettings: 'Язык',
      themeSettings: 'Внешний вид',
      saveChanges: 'Сохранить изменения',
      changesSaved: 'Изменения сохранены успешно',
      confirmDelete: 'Вы уверены?',
    },
  },
};

// Helper function to get nested translation value
export const getTranslation = (
  language: Language,
  namespace: TranslationNamespace,
  key: string
): string => {
  const keys = key.split('.');
  let current: any = translations[language]?.[namespace];

  for (const k of keys) {
    current = current?.[k];
    if (!current) {
      return `[${key}]`; // Fallback for missing translations
    }
  }

  return typeof current === 'string' ? current : `[${key}]`;
};
